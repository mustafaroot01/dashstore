import{h as B,c as S,w as v,a as e,i as _,o as n,d as r,F as b,e as h,t as a,j as q,k as A,b as p,u as l,v as x,f as u,m as E,p as F,g as N,q as g,s as U}from"./app-IK5CPhZk.js";import{A as z}from"./AdminLayout-DOrr8jPw.js";import{M as D}from"./Modal-CVSLeC4T.js";/* empty css            */const H={class:"max-w-5xl space-y-6 pb-12"},T={class:"card p-0 overflow-hidden shadow-sm"},$={class:"overflow-x-auto"},I={class:"w-full text-right bg-white"},L={class:"divide-y divide-slate-100/80"},O={class:"p-4 font-bold text-slate-800"},P={class:"p-4 text-slate-500 font-mono",dir:"ltr"},G={class:"p-4"},J={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800"},K={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-amber-100 text-amber-800"},Q={class:"p-4 text-center"},R={class:"flex items-center justify-center gap-2"},W=["onClick"],X=["onClick"],Y={key:1,class:"btn text-slate-400 bg-slate-50 border-none px-3 text-xs py-1.5 cursor-not-allowed",title:"لا يمكنك حذف نفسك"},Z={key:1,class:"text-xs font-bold text-slate-400 bg-slate-100 px-3 py-1.5 rounded-lg border-none",title:"الحساب الرئيسي محمي"},ee={class:"p-6"},te={class:"text-lg font-bold text-slate-800 mb-6"},se={class:"mb-4"},oe={key:0,class:"text-red-500 text-xs mt-1"},le={class:"mb-4"},ne={key:0,class:"text-red-500 text-xs mt-1"},re={class:"mb-4"},ae={class:"block text-sm font-semibold text-slate-700 mb-1"},ie={key:0,class:"text-amber-500 text-xs font-normal"},de=["required"],ue={key:0,class:"text-red-500 text-xs mt-1"},ce={class:"mb-6"},me=["value"],pe={key:0,class:"text-red-500 text-xs mt-1"},be={class:"mt-8 flex justify-end gap-3"},xe=["disabled"],ge={__name:"Index",props:["admins","roles"],setup(f){const w=U(),k=F(()=>w.props.auth?.admin?.id),c=g(!1),i=g(null),t=B({name:"",email:"",password:"",role_id:null});function y(){i.value=null,t.reset(),t.clearErrors(),c.value=!0}function M(d){i.value=d,t.name=d.name,t.email=d.email,t.password="",t.role_id=d.role_id,t.clearErrors(),c.value=!0}function m(){c.value=!1,setTimeout(()=>{t.reset(),i.value=null},200)}function C(){i.value?t.put(route("admin.admins.update",i.value.id),{onSuccess:()=>m()}):t.post(route("admin.admins.store"),{onSuccess:()=>m()})}function V(d){confirm(`هل أنت متأكد من حذف الحساب الإداري (${d.name}) بالكامل؟ لا يمكن التراجع عن هذا.`)&&N.delete(route("admin.admins.destroy",d.id),{preserveScroll:!0})}return(d,s)=>(n(),S(z,{title:"إدارة المشرفين"},{default:v(()=>[e("div",H,[e("div",{class:"card bg-slate-900 border-0 text-white shadow-xl relative overflow-hidden"},[s[6]||(s[6]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-transparent pointer-events-none"},null,-1)),e("div",{class:"relative flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},[s[5]||(s[5]=e("div",{class:"flex items-center gap-4"},[e("div",{class:"bg-white/10 p-3 rounded-2xl flex-shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])]),e("div",null,[e("h2",{class:"text-2xl font-bold font-mono"},"حسابات الإدارة (Admins)"),e("p",{class:"text-slate-400 mt-1 text-sm"},"إدارة حسابات الموظفين ومنحهم الأدوار والصلاحيات")])],-1)),e("button",{type:"button",onClick:y,class:"btn bg-blue-600 hover:bg-blue-500 text-white border-none shrink-0 flex items-center gap-2"},[...s[4]||(s[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),_(" إضافة مشرف جديد ",-1)])])])]),e("div",T,[e("div",$,[e("table",I,[s[7]||(s[7]=e("thead",{class:"bg-slate-50 border-b border-slate-100 text-slate-500"},[e("tr",null,[e("th",{class:"p-4 font-bold rounded-tr-xl"},"اسم الموظف"),e("th",{class:"p-4 font-bold"},"البريد الإلكتروني"),e("th",{class:"p-4 font-bold"},"الدور المخصص"),e("th",{class:"p-4 font-bold rounded-tl-xl text-center"},"إجراءات")])],-1)),e("tbody",L,[(n(!0),r(b,null,h(f.admins,o=>(n(),r("tr",{key:o.id,class:"hover:bg-slate-50/50 transition duration-150"},[e("td",O,a(o.name),1),e("td",P,a(o.email),1),e("td",G,[o.role?(n(),r("span",J,a(o.role.name),1)):(n(),r("span",K," مدير عام (كافة الصلاحيات) "))]),e("td",Q,[e("div",R,[o.id!==1?(n(),r(b,{key:0},[e("button",{onClick:j=>M(o),class:"btn text-blue-600 bg-blue-50 hover:bg-blue-100 border-none px-3 text-xs py-1.5",title:"تعديل"}," تعديل ",8,W),o.id!==k.value?(n(),r("button",{key:0,onClick:j=>V(o),class:"btn text-red-600 bg-red-50 hover:bg-red-100 border-none px-3 text-xs py-1.5",title:"حذف"}," حذف ",8,X)):(n(),r("button",Y," أنت "))],64)):(n(),r("span",Z,"حساب محمي"))])])]))),128))])])])])]),q(D,{show:c.value,onClose:m},{default:v(()=>[e("div",ee,[e("h2",te,a(i.value?"تعديل بيانات المشرف":"تسجيل مشرف جديد"),1),e("form",{onSubmit:A(C,["prevent"])},[e("div",se,[s[8]||(s[8]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1"},"الاسم الكامل",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>l(t).name=o),type:"text",class:"form-input",required:"",placeholder:"مثال: أحمد علي"},null,512),[[x,l(t).name]]),l(t).errors.name?(n(),r("p",oe,a(l(t).errors.name),1)):u("",!0)]),e("div",le,[s[9]||(s[9]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1"},"البريد الإلكتروني (تسجيل الدخول)",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>l(t).email=o),type:"email",class:"form-input font-mono text-left",dir:"ltr",required:"",placeholder:"admin@example.com"},null,512),[[x,l(t).email]]),l(t).errors.email?(n(),r("p",ne,a(l(t).errors.email),1)):u("",!0)]),e("div",re,[e("label",ae,[s[10]||(s[10]=_(" كلمة المرور ",-1)),i.value?(n(),r("span",ie," (اتركه فارغاً إذا لم ترد تغييره)")):u("",!0)]),p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>l(t).password=o),type:"password",class:"form-input font-mono text-left",dir:"ltr",required:!i.value},null,8,de),[[x,l(t).password]]),l(t).errors.password?(n(),r("p",ue,a(l(t).errors.password),1)):u("",!0)]),e("div",ce,[s[12]||(s[12]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-1"},"الدور والصلاحيات",-1)),p(e("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>l(t).role_id=o),class:"form-select"},[s[11]||(s[11]=e("option",{value:null},"مدير عام (دخول كامل بدون قيود)",-1)),(n(!0),r(b,null,h(f.roles,o=>(n(),r("option",{key:o.id,value:o.id},"مُحدد: "+a(o.name),9,me))),128))],512),[[E,l(t).role_id]]),l(t).errors.role_id?(n(),r("p",pe,a(l(t).errors.role_id),1)):u("",!0)]),e("div",be,[e("button",{type:"button",onClick:m,class:"btn btn-secondary"},"إلغاء"),e("button",{type:"submit",class:"btn btn-primary",disabled:l(t).processing},a(l(t).processing?"جاري الحفظ...":"حفظ البيانات"),9,xe)])],32)])]),_:1},8,["show"])]),_:1}))}};export{ge as default};
