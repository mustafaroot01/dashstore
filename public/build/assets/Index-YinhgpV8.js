import{h as M,c as j,w as v,a as e,i as B,o as n,d as l,F as p,e as x,t as d,f,j as V,k as A,b as g,n as L,u as r,v as S,A as E,g as F,q as h}from"./app-DA7iJFsN.js";import{A as N}from"./AdminLayout-CzmyY--h.js";import{M as D}from"./Modal-Bzv1YVbA.js";/* empty css            */const T={class:"max-w-5xl space-y-6 pb-12"},$={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},q={class:"p-5 flex-1"},z={class:"flex items-start justify-between mb-4"},R={class:"text-lg font-bold text-slate-800"},U={class:"bg-indigo-50 text-indigo-600 text-xs font-bold px-2.5 py-1 rounded-full border border-indigo-100"},H={class:"flex flex-wrap gap-2"},I={key:0,class:"text-slate-400 text-xs italic"},O={class:"border-t border-slate-100 bg-slate-50 p-3 flex justify-end gap-2"},G=["onClick"],J=["onClick"],K={key:1,class:"btn text-slate-400 bg-slate-50 border-none px-3 py-1.5 text-xs cursor-not-allowed",title:"لا يمكن حذفه لوجود موظفين"},P={key:0,class:"md:col-span-2 lg:col-span-3 card text-center py-12 text-slate-500"},Q={class:"p-6"},W={class:"text-lg font-bold text-slate-800 mb-6"},X={class:"mb-5"},Y={key:0,class:"text-red-500 text-xs mt-1"},Z={class:"mb-5"},ee={class:"bg-slate-50 border border-slate-200 rounded-xl p-4 grid gap-3"},te=["value"],se={class:"text-slate-700 text-sm font-medium select-none"},oe={class:"mt-8 flex justify-end gap-3"},ne=["disabled"],de={__name:"Index",props:["roles","permissionsList"],setup(u){const m=h(!1),c=h(null),t=M({name:"",permissions:[]});function w(){c.value=null,t.reset(),t.clearErrors(),m.value=!0}function _(a){c.value=a,t.name=a.name,t.permissions=a.permissions||[],t.clearErrors(),m.value=!0}function b(){m.value=!1,setTimeout(()=>{t.reset(),c.value=null},200)}function k(){c.value?t.put(route("admin.roles.update",c.value.id),{onSuccess:()=>b()}):t.post(route("admin.roles.store"),{onSuccess:()=>b()})}function y(a){confirm(`هل أنت متأكد من حذف الدور (${a.name})؟`)&&F.delete(route("admin.roles.destroy",a.id),{preserveScroll:!0})}return(a,s)=>(n(),j(N,{title:"إدارة الأدوار والصلاحيات"},{default:v(()=>[e("div",T,[e("div",{class:"card bg-slate-900 border-0 text-white shadow-xl relative overflow-hidden"},[s[4]||(s[4]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-indigo-600/20 to-transparent pointer-events-none"},null,-1)),e("div",{class:"relative flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},[s[3]||(s[3]=e("div",{class:"flex items-center gap-4"},[e("div",{class:"bg-white/10 p-3 rounded-2xl flex-shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])]),e("div",null,[e("h2",{class:"text-2xl font-bold font-mono"},"الأدوار المخصصة (Roles)"),e("p",{class:"text-slate-400 mt-1 text-sm"},"حدد نوعية الموظفين وما الذي يحق لهم فعله في النظام")])],-1)),e("button",{type:"button",onClick:w,class:"btn btn-primary shrink-0 flex items-center gap-2"},[...s[2]||(s[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),B(" إضافة دور جديد ",-1)])])])]),e("div",$,[(n(!0),l(p,null,x(u.roles,o=>(n(),l("div",{key:o.id,class:"card p-0 overflow-hidden flex flex-col hover:border-indigo-300 transition-colors"},[e("div",q,[e("div",z,[e("h3",R,d(o.name),1),e("span",U,d(o.admins_count)+" موظف ",1)]),s[5]||(s[5]=e("div",{class:"text-sm text-slate-500 mb-2 font-semibold"},"الصلاحيات الممنوحة:",-1)),e("div",H,[(n(!0),l(p,null,x(o.permissions||[],i=>(n(),l("span",{key:i,class:"inline-block bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded"},d(u.permissionsList[i]||i),1))),128)),!o.permissions||o.permissions.length===0?(n(),l("span",I," لا توجد صلاحيات (لا يمكنه فعل شيء) ")):f("",!0)])]),e("div",O,[e("button",{onClick:i=>_(o),class:"btn text-blue-600 bg-blue-50 hover:bg-blue-100 border-none px-3 py-1.5 text-xs"},"تعديل",8,G),o.admins_count===0?(n(),l("button",{key:0,onClick:i=>y(o),class:"btn text-red-600 bg-red-50 hover:bg-red-100 border-none px-3 py-1.5 text-xs"},"حذف",8,J)):(n(),l("button",K,"حذف"))])]))),128)),u.roles.length?f("",!0):(n(),l("div",P," لا توجد أدوار مخصصة حالياً. يتوفر فقط (المدير العام). "))])]),V(D,{show:m.value,onClose:b},{default:v(()=>[e("div",Q,[e("h2",W,d(c.value?"تعديل بيانات الدور":"إنشاء دور جديد"),1),e("form",{onSubmit:A(k,["prevent"])},[e("div",X,[s[6]||(s[6]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-2"},"اسم الدور (مثال: محاسب، كاتب، إلخ)",-1)),g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>r(t).name=o),type:"text",class:L(["form-input",{"border-red-500":r(t).errors.name}]),required:""},null,2),[[S,r(t).name]]),r(t).errors.name?(n(),l("p",Y,d(r(t).errors.name),1)):f("",!0)]),e("div",Z,[s[7]||(s[7]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-3"},"تخصيص الصلاحيات:",-1)),e("div",ee,[(n(!0),l(p,null,x(u.permissionsList,(o,i)=>(n(),l("label",{key:i,class:"flex items-center gap-3 cursor-pointer p-2 hover:bg-white rounded transition-colors border border-transparent hover:border-slate-200"},[g(e("input",{type:"checkbox",value:i,"onUpdate:modelValue":s[1]||(s[1]=C=>r(t).permissions=C),class:"w-5 h-5 text-indigo-600 bg-white border-slate-300 rounded focus:ring-indigo-500"},null,8,te),[[E,r(t).permissions]]),e("span",se,d(o),1)]))),128))])]),e("div",oe,[e("button",{type:"button",onClick:b,class:"btn btn-secondary"},"إلغاء"),e("button",{type:"submit",class:"btn btn-primary",disabled:r(t).processing},d(r(t).processing?"جاري الحفظ...":"حفظ الدور"),9,ne)])],32)])]),_:1},8,["show"])]),_:1}))}};export{de as default};
