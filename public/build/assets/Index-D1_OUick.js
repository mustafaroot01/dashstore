import{c as C,w as L,a as e,i as B,o as n,d,n as a,t as u,f as b,F as j,e as S,b as m,x as f,g as _,q as w,p as N}from"./app-DA7iJFsN.js";import{A as R}from"./AdminLayout-CzmyY--h.js";/* empty css            */const $={class:"max-w-5xl space-y-6 pb-12"},A={key:0,class:"flex flex-wrap gap-2 items-center"},M={key:1,class:"card text-center py-16 bg-slate-50 border-dashed border-2"},V={class:"space-y-4"},F=["onClick"],I={class:"flex items-center gap-3"},z={class:"text-slate-500 text-sm font-mono whitespace-nowrap",dir:"ltr"},D={class:"hidden md:inline-block text-slate-400 text-xs font-mono px-2 py-0.5 bg-white rounded border"},E={class:"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-500 hover:text-primary-600 hover:border-primary-300 transition-colors"},O=["onClick"],q={class:"text-sm font-mono text-slate-700 truncate cursor-pointer",dir:"ltr"},G={class:"bg-[#1e1e1e] p-4 border-t border-slate-200"},H={class:"text-xs font-mono text-emerald-400 leading-relaxed overflow-x-auto whitespace-pre-wrap",dir:"ltr"},T={key:2,class:"text-center py-12 text-slate-500"},K={__name:"Index",props:{logs:Array},setup(c){const g=c,l=w([]),r=w(null),v=N(()=>r.value?g.logs.filter(o=>{const t=String(o.level).toLowerCase();return r.value==="error"?["error","critical","alert","emergency"].includes(t):t===r.value}):g.logs);function x(o){l.value.includes(o)?l.value=l.value.filter(t=>t!==o):l.value.push(o)}function p(){confirm("الرجاء التأكيد: هل تريد فعلاً مسح جميع الأخطاء نهائياً؟")&&(_.delete(route("admin.error-log.clear"),{preserveScroll:!0}),l.value=[])}function h(o){const t=String(o).toLowerCase();return["error","critical","alert","emergency"].includes(t)?"bg-red-50 text-red-600 border-red-200":t==="warning"?"bg-amber-50 text-amber-600 border-amber-200":["info","notice"].includes(t)?"bg-blue-50 text-blue-600 border-blue-200":"bg-slate-50 text-slate-600 border-slate-200"}function k(o){const t=String(o).toLowerCase();return["error","critical","alert","emergency"].includes(t)?"border-r-red-500":t==="warning"?"border-r-amber-400":["info","notice"].includes(t)?"border-r-blue-500":"border-r-slate-300"}return(o,t)=>(n(),C(R,{title:"سجلات النظام (Logs)"},{default:L(()=>[e("div",$,[e("div",{class:"card bg-slate-900 border-0 text-white shadow-xl relative overflow-hidden"},[t[6]||(t[6]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-red-600/20 to-transparent pointer-events-none"},null,-1)),e("div",{class:"relative flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},[t[5]||(t[5]=e("div",{class:"flex items-center gap-4"},[e("div",{class:"bg-white/10 p-3 rounded-2xl flex-shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])]),e("div",null,[e("h2",{class:"text-2xl font-bold font-mono"},"laravel.log"),e("p",{class:"text-slate-400 mt-1 text-sm"},"مراقبة وتشخيص أخطاء النظام (أحدث 100 سجل)")])],-1)),e("button",{onClick:p,class:"btn bg-red-600 hover:bg-red-500 text-white border-none shrink-0 flex items-center gap-2"},[...t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),B(" تفريغ السجل ",-1)])])])]),c.logs.length?(n(),d("div",A,[t[7]||(t[7]=e("span",{class:"text-sm font-semibold text-slate-600 ml-2"},"تصفية حسب المستوى:",-1)),e("button",{onClick:t[0]||(t[0]=s=>r.value=null),class:a(["px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",r.value===null?"bg-slate-800 text-white":"bg-slate-200 text-slate-600 hover:bg-slate-300"])}," الكل ("+u(c.logs.length)+") ",3),e("button",{onClick:t[1]||(t[1]=s=>r.value="error"),class:a(["px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",r.value==="error"?"bg-red-600 text-white":"bg-red-100 text-red-600 hover:bg-red-200"])}," ERROR ",2),e("button",{onClick:t[2]||(t[2]=s=>r.value="warning"),class:a(["px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",r.value==="warning"?"bg-amber-500 text-white":"bg-amber-100 text-amber-600 hover:bg-amber-200"])}," WARNING ",2),e("button",{onClick:t[3]||(t[3]=s=>r.value="info"),class:a(["px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",r.value==="info"?"bg-blue-500 text-white":"bg-blue-100 text-blue-600 hover:bg-blue-200"])}," INFO ",2)])):b("",!0),c.logs.length?b("",!0):(n(),d("div",M,[...t[8]||(t[8]=[e("div",{class:"bg-emerald-100 text-emerald-600 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1),e("h3",{class:"text-xl font-bold text-slate-800"},"لا توجد أخطاء!",-1),e("p",{class:"text-slate-500 mt-2"},"نظامك يعمل بكفاءة ولا توجد أي مشاكل مسجلة حالياً.",-1)])])),e("div",V,[(n(!0),d(j,null,S(v.value,(s,i)=>(n(),d("div",{key:i,class:a(["bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden transition-all duration-200 border-r-4",k(s.level)])},[e("div",{class:"flex items-center justify-between p-4 bg-slate-50 cursor-pointer hover:bg-slate-100 select-none",onClick:y=>x(i)},[e("div",I,[e("span",{class:a(["inline-block px-2.5 py-1 text-xs font-bold font-mono tracking-wider rounded border",h(s.level)])},u(String(s.level).toUpperCase()),3),e("span",z,u(s.date),1),e("span",D,u(s.env),1)]),e("button",E,[(n(),d("svg",{xmlns:"http://www.w3.org/2000/svg",class:a(["h-4 w-4 transition-transform duration-200",{"rotate-180":l.value.includes(i)}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],8,F),m(e("div",{class:"p-4 border-t border-slate-100",onClick:y=>x(i)},[e("p",q,u(s.message.split(`
`)[0]),1)],8,O),[[f,!l.value.includes(i)]]),m(e("div",G,[e("pre",H,u(s.message),1)],512),[[f,l.value.includes(i)]])],2))),128))]),c.logs.length&&!v.value.length?(n(),d("div",T," لا توجد سجلات تطابق الفلتر المختار. ")):b("",!0)])]),_:1}))}};export{K as default};
