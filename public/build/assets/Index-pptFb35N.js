import{q as f,c as A,w as v,a as t,b as g,v as F,o as l,d as a,F as h,e as y,t as o,m as S,i,f as c,j,u as V,l as T,n as m,g as _,p as I}from"./app-DA7iJFsN.js";import{A as H}from"./AdminLayout-CzmyY--h.js";import{C as q}from"./ConfirmModal-BLS3Vsu-.js";/* empty css            */const E={class:"flex items-center justify-between mb-6"},Q={class:"flex items-center gap-3 flex-wrap"},G=["value"],J=["disabled"],K=["value"],P={key:0,class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold rounded-full bg-amber-100 text-amber-800 border border-amber-200"},R={class:"card p-0 mb-6"},W={class:"overflow-x-auto min-h-[400px]"},X={class:"data-table"},Y={class:"text-slate-400 text-xs font-mono text-center"},Z={class:"flex items-center gap-3 w-max"},tt={class:"w-12 h-12 rounded-xl border border-slate-100 overflow-hidden bg-slate-50 shadow-sm shrink-0 flex items-center justify-center"},et=["src"],st={key:1,class:"fas fa-box text-slate-300 text-lg"},lt={class:"flex flex-col"},at={class:"font-bold text-slate-800 text-[13px]"},ot={key:0,class:"text-[10px] text-slate-400 font-mono mt-0.5"},nt={key:1,class:"text-[11px] text-slate-500 mt-0.5"},rt={class:"flex flex-col gap-1 w-max"},it={class:"inline-flex items-center gap-1.5 text-[12px] font-bold text-slate-700"},dt={key:0,class:"inline-flex items-center gap-1 text-[10px] text-primary-600 font-bold bg-primary-50 px-2 py-0.5 rounded-md border border-primary-100/50 w-fit"},ut={key:0,class:"flex flex-col w-max"},ct={class:"text-red-500 font-bold text-[13px]"},xt={class:"line-through text-slate-400 text-[10px] mt-0.5"},ft={key:1,class:"w-max"},mt={class:"font-bold text-slate-700 text-[13px]"},bt={class:"text-center"},pt=["onClick","title"],vt={class:"text-center"},gt=["onClick"],ht={class:"flex items-center justify-center gap-1.5 opacity-100 lg:opacity-30 lg:group-hover:opacity-100 transition-opacity"},yt=["onClick"],_t={key:0},wt={key:0,class:"flex flex-col sm:flex-row items-center justify-between px-6 py-4 border-t border-slate-100 gap-4 mt-auto"},kt={class:"text-slate-500 text-[12px] font-medium"},Ct={class:"font-bold text-slate-800"},St={class:"font-bold text-slate-800"},jt={class:"font-bold text-slate-800"},Vt={class:"flex gap-1.5"},Tt=["innerHTML"],Ot={__name:"Index",props:{products:Object,categories:Array,filters:Object,outOfStockCount:{type:Number,default:0}},setup(n){const x=n,w=f(x.filters?.search??""),d=f(x.filters?.category_id??""),b=f(x.filters?.subcategory_id??""),k=f(x.filters?.availability??""),u=f(null),L=I(()=>d.value?x.categories.find(s=>s.id===d.value)?.subcategories||[]:[]);let M;function p(){clearTimeout(M),M=setTimeout(()=>{_.get(route("admin.products.index"),{search:w.value,category_id:d.value,subcategory_id:b.value,availability:k.value},{preserveState:!0})},400)}function O(){b.value="",p()}function C(r){return Number(r).toLocaleString("ar-IQ")+" د.ع"}function $(r){_.patch(route("admin.products.toggle-availability",r.id),{},{preserveScroll:!0})}function z(r){_.patch(route("admin.products.toggle-active",r.id),{},{preserveScroll:!0})}function B(r){u.value=r}function D(){_.delete(route("admin.products.destroy",u.value.id),{preserveScroll:!0,onFinish:()=>{u.value=null}})}return(r,s)=>(l(),A(H,{title:"المنتجات"},{default:v(()=>[t("div",E,[t("div",Q,[g(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>w.value=e),type:"text",placeholder:"بحث بالاسم أو الكود...",class:"form-input w-56",onInput:p},null,544),[[F,w.value]]),g(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),class:"form-select w-44",onChange:O},[s[5]||(s[5]=t("option",{value:""},"كل الأقسام",-1)),(l(!0),a(h,null,y(n.categories,e=>(l(),a("option",{key:e.id,value:e.id},o(e.name),9,G))),128))],544),[[S,d.value]]),g(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>b.value=e),class:"form-select w-44",onChange:p,disabled:!d.value},[s[6]||(s[6]=t("option",{value:""},"كل الأصناف",-1)),(l(!0),a(h,null,y(L.value,e=>(l(),a("option",{key:e.id,value:e.id},o(e.name),9,K))),128))],40,J),[[S,b.value]]),g(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>k.value=e),class:"form-select w-40",onChange:p},[...s[7]||(s[7]=[t("option",{value:""},"كل التوفر",-1),t("option",{value:"in"},"متوفر ✅",-1),t("option",{value:"out"},"نفذ ⚠️",-1)])],544),[[S,k.value]]),n.outOfStockCount>0?(l(),a("span",P,[s[8]||(s[8]=t("i",{class:"fas fa-exclamation-triangle text-amber-500"},null,-1)),i(" "+o(n.outOfStockCount)+" منتج نفذ ",1)])):c("",!0)]),j(V(T),{href:r.route("admin.products.create"),class:"btn-primary shadow-md hover:shadow-lg transition-all"},{default:v(()=>[...s[9]||(s[9]=[t("i",{class:"fas fa-plus ml-2"},null,-1),i(" إضافة منتج ",-1)])]),_:1},8,["href"])]),t("div",R,[t("div",W,[t("table",X,[s[15]||(s[15]=t("thead",null,[t("tr",null,[t("th",{style:{width:"50px"}},"#"),t("th",null,"المنتج"),t("th",null,"القسم / الصنف"),t("th",null,"السعر"),t("th",{class:"text-center"},"التوفر والمخزون"),t("th",{class:"text-center"},"الظهور"),t("th",{class:"text-center"},"الإجراءات")])],-1)),t("tbody",null,[(l(!0),a(h,null,y(n.products.data,(e,U)=>(l(),a("tr",{key:e.id},[t("td",Y,o((n.products.current_page-1)*n.products.per_page+U+1),1),t("td",null,[t("div",Z,[t("div",tt,[e.first_image&&e.first_image.url?(l(),a("img",{key:0,src:e.first_image.url,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"},null,8,et)):(l(),a("i",st))]),t("div",lt,[t("span",at,o(e.name),1),e.sku?(l(),a("span",ot,"رمز: "+o(e.sku),1)):c("",!0),e.size?(l(),a("span",nt,o(e.size),1)):c("",!0)])])]),t("td",null,[t("div",rt,[t("span",it,[s[10]||(s[10]=t("i",{class:"fas fa-folder text-slate-400 text-[10px]"},null,-1)),i(" "+o(e.category?.name||"غير محدد"),1)]),e.subcategory?(l(),a("span",dt,[s[11]||(s[11]=t("i",{class:"fas fa-level-down-alt fa-flip-horizontal"},null,-1)),i(" "+o(e.subcategory.name),1)])):c("",!0)])]),t("td",null,[e.is_on_sale&&e.sale_price?(l(),a("div",ut,[t("span",ct,o(C(e.sale_price)),1),t("span",xt,o(C(e.price)),1)])):(l(),a("div",ft,[t("span",mt,o(C(e.price)),1)]))]),t("td",bt,[t("button",{onClick:N=>$(e),class:m(["px-3 py-1 text-[11px] font-bold rounded-full transition-all inline-flex items-center gap-1.5",e.is_available?"text-emerald-700 bg-emerald-100/50 hover:bg-emerald-100":"text-amber-700 bg-amber-100/50 hover:bg-amber-100"]),title:e.is_available?"إيقاف التوفر":"تفعيل التوفر"},[t("span",{class:m(["w-1.5 h-1.5 rounded-full",e.is_available?"bg-emerald-500":"bg-amber-500"])},null,2),i(" "+o(e.is_available?"متوفر":"نفذ"),1)],10,pt)]),t("td",vt,[t("button",{onClick:N=>z(e),class:m(["px-3 py-1 text-[11px] font-bold rounded-full transition-all inline-flex items-center gap-1.5",e.is_active?"text-blue-700 bg-blue-100/50 hover:bg-blue-100":"text-slate-600 bg-slate-100 hover:bg-slate-200"]),title:"تغيير حالة الظهور"},[t("span",{class:m(["w-1.5 h-1.5 rounded-full",e.is_active?"bg-blue-500":"bg-slate-400"])},null,2),i(" "+o(e.is_active?"نشط":"مخفي"),1)],10,gt)]),t("td",null,[t("div",ht,[j(V(T),{href:r.route("admin.products.edit",e.id),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-blue-50 text-blue-700 hover:bg-blue-600 hover:text-white transition-all shadow-sm"},{default:v(()=>[...s[12]||(s[12]=[t("i",{class:"fas fa-pen text-[11px]"},null,-1),t("span",{class:"text-[12px] font-bold"},"تعديل",-1)])]),_:1},8,["href"]),t("button",{onClick:N=>B(e),class:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-red-50 text-red-700 hover:bg-red-600 hover:text-white transition-all shadow-sm"},[...s[13]||(s[13]=[t("i",{class:"fas fa-trash text-[11px]"},null,-1),t("span",{class:"text-[12px] font-bold"},"حذف",-1)])],8,yt)])])]))),128)),n.products.data.length?c("",!0):(l(),a("tr",_t,[...s[14]||(s[14]=[t("td",{colspan:"7",class:"px-4 py-12 text-center text-slate-500 bg-slate-50/50"},[t("div",{class:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-300"},[t("i",{class:"fas fa-box-open text-2xl"})]),t("p",{class:"font-medium"},"لا توجد منتجات مضافة حتى الآن أو غير مطابقة لبحثك.")],-1)])]))])])]),n.products.last_page>1?(l(),a("div",wt,[t("p",kt,[s[16]||(s[16]=i(" عرض ",-1)),t("span",Ct,o((n.products.current_page-1)*n.products.per_page+1),1),s[17]||(s[17]=i(" إلى ",-1)),t("span",St,o(Math.min(n.products.current_page*n.products.per_page,n.products.total)),1),s[18]||(s[18]=i(" من أصل ",-1)),t("span",jt,o(n.products.total),1),s[19]||(s[19]=i(" منتج ",-1))]),t("div",Vt,[(l(!0),a(h,null,y(n.products.links,e=>(l(),A(V(T),{key:e.label,href:e.url??"#",class:m(["px-3 py-1.5 rounded-lg text-[12px] font-bold transition-all",[e.active?"bg-primary border-transparent text-white shadow-sm":"bg-white border border-slate-200 text-slate-600 hover:border-slate-300",e.url?"":"opacity-40 cursor-not-allowed hidden md:inline-block border-transparent"]]),disabled:!e.url},{default:v(()=>[t("span",{innerHTML:e.label},null,8,Tt)]),_:2},1032,["href","class","disabled"]))),128))])])):c("",!0)]),j(q,{show:!!u.value,title:"حذف المنتج",message:`هل تريد حذف "${u.value?.name??""}"؟ لا يمكن التراجع عن هذا الإجراء.`,"confirm-label":"حذف",onConfirm:D,onCancel:s[4]||(s[4]=e=>u.value=null)},null,8,["show","message"])]),_:1}))}};export{Ot as default};
