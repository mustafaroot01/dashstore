import{h as D,c as g,w as M,a as e,t as n,o as r,d as c,F as A,e as T,n as _,f as y,T as U,k as h,b as m,u as a,v,m as j,j as B,g as k,q as f}from"./app-DA7iJFsN.js";import{A as F}from"./AdminLayout-CzmyY--h.js";import{C as L}from"./ConfirmModal-BLS3Vsu-.js";/* empty css            */const N={class:"flex justify-between items-center mb-6"},I={class:"text-slate-500 text-sm"},q={class:"card overflow-hidden p-0"},z={class:"data-table"},E={class:"text-slate-400 text-xs font-mono text-center"},J={class:"bg-slate-100 text-primary-700 px-2.5 py-1 rounded-lg text-sm font-mono font-bold"},O={class:"font-bold text-slate-800"},Q={class:"text-sm text-slate-600"},W={class:"font-medium text-slate-800"},G={class:"text-slate-400"},H={class:"text-slate-500 text-sm"},K=["onClick"],P={class:"flex gap-2"},R=["onClick"],X=["onClick"],Y={key:0,class:"text-center text-slate-400 text-sm py-8"},Z={class:"modal-box max-w-md"},ee={class:"flex items-center justify-between p-5 border-b"},te={class:"font-bold"},se={class:"form-group"},le={class:"grid grid-cols-2 gap-4"},oe={class:"form-group"},ne={class:"form-group"},ae={class:"grid grid-cols-2 gap-4"},ie={class:"form-group"},de={class:"form-group"},re=["disabled"],ve={__name:"Index",props:{coupons:Object},setup(u){const p=f(!1),i=f(null),d=f(null),l=D({code:"",type:"percent",value:"",usage_limit:"",expires_at:""});function x(o=null){i.value=o,o?(l.code=o.code,l.type=o.type,l.value=o.value,l.usage_limit=o.usage_limit??"",l.expires_at=o.expires_at?.split("T")[0]??""):l.reset(),p.value=!0}function C(){const o=i.value?route("admin.coupons.update",i.value.id):route("admin.coupons.store"),t=i.value?"patch":"post";l[t](o,{onSuccess:()=>{p.value=!1}})}function w(o){k.patch(route("admin.coupons.toggle-active",o.id),{},{preserveScroll:!0})}function V(o){d.value=o}function $(){k.delete(route("admin.coupons.destroy",d.value.id),{onFinish:()=>{d.value=null}})}return(o,t)=>(r(),g(F,{title:"Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª"},{default:M(()=>[e("div",N,[e("span",I,n(u.coupons.total)+" ÙƒÙˆØ¨ÙˆÙ†",1),e("button",{onClick:t[0]||(t[0]=s=>x()),class:"btn-primary"},"+ ÙƒÙˆØ¨ÙˆÙ† Ø¬Ø¯ÙŠØ¯")]),e("div",q,[e("table",z,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",{style:{width:"50px"}},"#"),e("th",null,"Ø§Ù„ÙƒÙˆØ¯"),e("th",null,"Ø§Ù„Ù†ÙˆØ¹"),e("th",null,"Ø§Ù„Ù‚ÙŠÙ…Ø©"),e("th",null,"Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…"),e("th",null,"Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡"),e("th",null,"Ø§Ù„Ø­Ø§Ù„Ø©"),e("th",null,"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª")])],-1)),e("tbody",null,[(r(!0),c(A,null,T(u.coupons.data,(s,S)=>(r(),c("tr",{key:s.id},[e("td",E,n((u.coupons.current_page-1)*u.coupons.per_page+S+1),1),e("td",null,[e("code",J,n(s.code),1)]),e("td",null,[e("span",{class:_(["text-xs font-medium",s.type==="percent"?"text-violet-600":"text-emerald-600"])},n(s.type==="percent"?"% Ù†Ø³Ø¨Ø©":"Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª"),3)]),e("td",O,n(s.type==="percent"?s.value+"%":Number(s.value).toLocaleString("ar-IQ")+" Ø¯.Ø¹"),1),e("td",Q,[e("span",W,n(s.used_count),1),e("span",G," / "+n(s.usage_limit??"âˆž"),1)]),e("td",H,n(s.expires_at?new Date(s.expires_at).toLocaleDateString("ar"):"â€”"),1),e("td",null,[e("button",{onClick:b=>w(s),class:_(["badge cursor-pointer",s.is_active?"badge-delivered":"badge-pending"])},n(s.is_active?"Ù†Ø´Ø·":"Ù…ÙˆÙ‚ÙˆÙ"),11,K)]),e("td",null,[e("div",P,[e("button",{onClick:b=>x(s),class:"btn-secondary py-1.5 px-3 text-xs"},"âœï¸ ØªØ¹Ø¯ÙŠÙ„",8,R),e("button",{onClick:b=>V(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium bg-red-50 text-red-700 border border-red-200 rounded-lg hover:bg-red-100 transition-all"}," ðŸ—‘ Ø­Ø°Ù ",8,X)])])]))),128))])]),u.coupons.data.length?y("",!0):(r(),c("p",Y,"Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙˆØ¨ÙˆÙ†Ø§Øª"))]),(r(),g(U,{to:"body"},[p.value?(r(),c("div",{key:0,class:"modal-backdrop",onClick:t[7]||(t[7]=h(s=>p.value=!1,["self"]))},[e("div",Z,[e("div",ee,[e("h3",te,n(i.value?"ØªØ¹Ø¯ÙŠÙ„ ÙƒÙˆØ¨ÙˆÙ†":"ÙƒÙˆØ¨ÙˆÙ† Ø¬Ø¯ÙŠØ¯"),1),e("button",{onClick:t[1]||(t[1]=s=>p.value=!1),class:"text-xl text-slate-400"},"Ã—")]),e("form",{onSubmit:h(C,["prevent"]),class:"p-5 space-y-4"},[e("div",se,[t[10]||(t[10]=e("label",{class:"form-label"},"Ø§Ù„ÙƒÙˆØ¯ (ÙŠÙÙˆÙ„ÙŽÙ‘Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù† ØªÙØ±Ùƒ ÙØ§Ø±ØºØ§Ù‹)",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(l).code=s),class:"form-input font-mono uppercase",placeholder:"AMWAJ10"},null,512),[[v,a(l).code]])]),e("div",le,[e("div",oe,[t[12]||(t[12]=e("label",{class:"form-label"},"Ø§Ù„Ù†ÙˆØ¹",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a(l).type=s),class:"form-select"},[...t[11]||(t[11]=[e("option",{value:"percent"},"Ù†Ø³Ø¨Ø© %",-1),e("option",{value:"fixed"},"Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª",-1)])],512),[[j,a(l).type]])]),e("div",ne,[t[13]||(t[13]=e("label",{class:"form-label"},"Ø§Ù„Ù‚ÙŠÙ…Ø©",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>a(l).value=s),type:"number",min:"0",step:"0.01",class:"form-input",required:""},null,512),[[v,a(l).value]])])]),e("div",ae,[e("div",ie,[t[14]||(t[14]=e("label",{class:"form-label"},"Ø­Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a(l).usage_limit=s),type:"number",min:"1",class:"form-input",placeholder:"âˆž ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯"},null,512),[[v,a(l).usage_limit]])]),e("div",de,[t[15]||(t[15]=e("label",{class:"form-label"},"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>a(l).expires_at=s),type:"date",class:"form-input"},null,512),[[v,a(l).expires_at]])])]),e("button",{type:"submit",disabled:a(l).processing,class:"btn-primary w-full"},n(i.value?"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª":"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†"),9,re)],32)])])):y("",!0)])),B(L,{show:!!d.value,title:"Ø­Ø°Ù Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†",message:`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ÙƒÙˆØ¨ÙˆÙ† "${d.value?.code??""}"ØŸ`,"confirm-label":"Ø­Ø°Ù",onConfirm:$,onCancel:t[8]||(t[8]=s=>d.value=null)},null,8,["show","message"])]),_:1}))}};export{ve as default};
