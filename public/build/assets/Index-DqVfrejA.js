import{h as S,c as A,w as D,a as e,k as $,b as v,u as i,o,d as r,F as b,e as h,t as a,m as F,v as q,f,n as m,x as G,j as H,g as _,q as g}from"./app-IK5CPhZk.js";import{A as L}from"./AdminLayout-DOrr8jPw.js";import{C as N}from"./ConfirmModal-BDDpFDbB.js";/* empty css            */const E={class:"max-w-3xl"},I={class:"card mb-4 min-w-max"},T={class:"flex gap-3"},U=["value"],z=["disabled"],O={key:0,class:"text-sm text-red-500"},J={key:1,class:"text-sm text-red-500"},K={key:0,class:"space-y-3"},P=["onClick"],Q={class:"flex items-center gap-3"},R={class:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-sm"},W={class:"font-bold text-slate-800 text-base"},X={class:"text-xs text-slate-500 mt-0.5"},Y={key:0},Z={key:1},ee={class:"flex items-center gap-3"},te={class:"bg-slate-50/50 p-4 pt-0 border-t border-slate-100"},se={key:0,class:"w-full text-right mt-4 rounded-lg overflow-hidden border border-slate-200 bg-white"},oe={class:"divide-y divide-slate-100"},re={class:"px-4 py-3 text-slate-400 text-xs font-mono text-center"},ne={class:"px-4 py-3 font-semibold text-slate-700 text-sm"},le={class:"px-4 py-3"},ae={class:"bg-blue-50 text-blue-700 text-xs font-semibold px-2 py-0.5 rounded-full"},ie={class:"px-4 py-3 text-center"},de=["onClick"],ce={class:"px-4 py-3 text-center"},ue=["onClick"],xe={key:1,class:"text-center py-6 text-slate-400 text-sm bg-white rounded-lg border border-slate-200 mt-4"},me={key:1,class:"card text-center py-10"},fe={__name:"Index",props:{governorates:Array},setup(p){const u=g([]),c=g(null),n=S({name:"",governorate_id:""});function k(l){const s=u.value.indexOf(l);s>-1?u.value.splice(s,1):u.value.push(l)}function x(l){return u.value.includes(l)}function y(){const l=n.governorate_id;n.post(route("admin.districts.store"),{onSuccess:()=>{n.reset("name"),x(l)||u.value.push(l)}})}function w(l){_.patch(route("admin.districts.toggle-active",l.id),{},{preserveScroll:!0})}function C(l){c.value=l}function M(){_.delete(route("admin.districts.destroy",c.value.id),{onFinish:()=>{c.value=null},preserveScroll:!0})}return(l,s)=>(o(),A(L,{title:"الأقضية تقسيم المحافظات"},{default:D(()=>[e("div",E,[e("div",I,[e("form",{onSubmit:$(y,["prevent"]),class:"flex flex-col gap-2"},[e("div",T,[v(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>i(n).governorate_id=t),class:"form-input flex-1 max-w-xs",required:""},[s[3]||(s[3]=e("option",{value:"",disabled:""},"اختر المحافظة...",-1)),(o(!0),r(b,null,h(p.governorates,t=>(o(),r("option",{key:t.id,value:t.id},a(t.name),9,U))),128))],512),[[F,i(n).governorate_id]]),v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>i(n).name=t),type:"text",placeholder:"اسم القضاء الجديد...",class:"form-input flex-1",required:""},null,512),[[q,i(n).name]]),e("button",{type:"submit",disabled:i(n).processing,class:"btn-primary whitespace-nowrap"}," + إضافة قضاء ",8,z)]),i(n).errors.governorate_id?(o(),r("div",O,a(i(n).errors.governorate_id),1)):f("",!0),i(n).errors.name?(o(),r("div",J,a(i(n).errors.name),1)):f("",!0)],32)]),p.governorates.length?(o(),r("div",K,[(o(!0),r(b,null,h(p.governorates,(t,V)=>(o(),r("div",{key:t.id,class:"card p-0 overflow-hidden"},[e("div",{onClick:d=>k(t.id),class:m(["flex items-center justify-between p-4 cursor-pointer hover:bg-slate-50 transition-colors bg-white select-none border-b border-transparent",{"border-slate-100 bg-slate-50":x(t.id)}])},[e("div",Q,[e("div",R,a(V+1),1),e("div",null,[e("h3",W,a(t.name),1),e("p",X,[t.districts.length===0?(o(),r("span",Y,"لا توجد أقضية مضافة")):(o(),r("span",Z,a(t.districts.length)+" أقضية مضافة",1))])])]),e("div",ee,[e("span",{class:m(["badge",t.is_active?"badge-delivered":"badge-pending"])},a(t.is_active?"نشط":"موقوف"),3),(o(),r("svg",{class:m(["w-5 h-5 text-slate-400 transition-transform duration-300",{"rotate-180":x(t.id)}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...s[4]||(s[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],10,P),v(e("div",te,[t.districts.length>0?(o(),r("table",se,[s[6]||(s[6]=e("thead",{class:"bg-slate-100 border-b border-slate-200"},[e("tr",null,[e("th",{class:"px-4 py-3 text-xs font-semibold tracking-wide text-slate-500 w-12 text-center"},"#"),e("th",{class:"px-4 py-3 text-xs font-semibold tracking-wide text-slate-500"},"اسم القضاء"),e("th",{class:"px-4 py-3 text-xs font-semibold tracking-wide text-slate-500"},"الطلبات"),e("th",{class:"px-4 py-3 text-xs font-semibold tracking-wide text-slate-500 text-center"},"الحالة"),e("th",{class:"px-4 py-3 text-xs font-semibold tracking-wide text-slate-500 text-center"},"إجراء")])],-1)),e("tbody",oe,[(o(!0),r(b,null,h(t.districts,(d,j)=>(o(),r("tr",{key:d.id,class:"hover:bg-slate-50/50 transition-colors"},[e("td",re,a(j+1),1),e("td",ne,a(d.name),1),e("td",le,[e("span",ae,a(d.orders_count)+" طلب ",1)]),e("td",ie,[e("button",{onClick:B=>w(d),class:m(["px-2 py-1 text-xs font-medium rounded-md border",d.is_active?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-amber-50 text-amber-700 border-amber-200"])},a(d.is_active?"نشط":"موقوف"),11,de)]),e("td",ce,[e("button",{onClick:B=>C(d),class:"inline-flex items-center justify-center p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors"},[...s[5]||(s[5]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ue)])]))),128))])])):(o(),r("div",xe," لا توجد أقضية في هذه المحافظة. "))],512),[[G,x(t.id)]])]))),128))])):(o(),r("div",me,[...s[7]||(s[7]=[e("svg",{class:"w-12 h-12 text-slate-300 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),e("p",{class:"text-slate-500 font-medium"},"لا توجد محافظات مضافة",-1),e("p",{class:"text-slate-400 text-sm mt-1"},"يجب إضافة محافظات أولاً من قائمة المحافظات قبل البدء بخلق أقضية.",-1)])]))]),H(N,{show:!!c.value,title:"حذف القضاء",message:`هل تريد حذف قضاء "${c.value?.name??""}"؟`,"confirm-label":"حذف",onConfirm:M,onCancel:s[2]||(s[2]=t=>c.value=null)},null,8,["show","message"])]),_:1}))}};export{fe as default};
